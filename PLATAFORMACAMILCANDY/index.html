<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cami Candy - Punto de Venta</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Estilos CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/styles-part2.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-icon">
                <i class="fas fa-candy-cane"></i>
            </div>
            <div>
                <h2>Cami <span>Candy</span></h2>
            </div>
        </div>

        <div class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-chevron-left" id="toggleIcon"></i>
        </div>

        <div class="sidebar-menu">
            <div class="menu-item active" data-section="inventory">
                <i class="fas fa-boxes"></i>
                <span>Gestión de Inventario</span>
            </div>
            <div class="menu-item" data-section="pos">
                <i class="fas fa-cash-register"></i>
                <span>Punto de Venta</span>
            </div>
            <div class="menu-item" data-section="reports">
                <i class="fas fa-chart-bar"></i>
                <span>Reportes</span>
            </div>
            <div class="menu-item" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </div>
            <div class="menu-item" data-section="settings">
                <i class="fas fa-cog"></i>
                <span>Configuración</span>
            </div>
            <div class="menu-item" data-section="help"
                style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                <i class="fas fa-question-circle"></i>
                <span>¿Cómo utilizar?</span>
            </div>
        </div>

        <div class="sidebar-footer">
            <p>Cami Candy v1.0</p>
            <p>© 2024 Todos los derechos reservados</p>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content" id="mainContent">
        <!-- Top Header -->
        <div class="top-header">
            <div class="page-title" id="pageTitle">
                <i class="fas fa-boxes"></i>
                <span>Gestión de Inventario</span>
            </div>

            <div class="user-info">
                <div class="user-avatar">
                    <span>CC</span>
                </div>
                <div>
                    <p style="font-weight: 600;">Cami Candy</p>
                    <p style="font-size: 0.9rem; color: #666;">Administrador</p>
                </div>
            </div>
        </div>

        <!-- Content Wrapper -->
        <div class="content-wrapper">
            <!-- Inventory Management Section -->
            <section id="inventorySection" class="content-section active">
                <h2 class="section-title">
                    <i class="fas fa-boxes"></i> Gestión de Inventario
                </h2>

                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <strong>¡Atención!</strong> Los productos marcados en rojo tienen inventario bajo.
                        Los productos en verde tienen inventario suficiente.
                    </div>
                </div>

                <div class="product-form">
                    <h3><i class="fas fa-plus-circle"></i> Agregar Nuevo Producto</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="productName">Nombre del Producto *</label>
                            <input type="text" id="productName" placeholder="Ej: Concentrado Michelada Tamarindo">
                        </div>
                        <div class="form-group">
                            <label for="productType">Tipo de Producto *</label>
                            <select id="productType">
                                <option value="concentrado">Concentrado de Michelada</option>
                                <option value="embolsado">Producto Embolsado</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="productPrice">Precio de Venta ($) *</label>
                            <input type="number" id="productPrice" min="0" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label for="productCost">Costo ($) *</label>
                            <input type="number" id="productCost" min="0" step="0.01" placeholder="0.00">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="initialStock">Inventario Inicial *</label>
                            <input type="number" id="initialStock" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label for="minStock">Inventario Mínimo (Alerta) *</label>
                            <input type="number" id="minStock" min="0" placeholder="10" value="10">
                        </div>
                    </div>

                    <button class="btn btn-primary" id="addProductBtn">
                        <i class="fas fa-save"></i> Guardar Producto
                    </button>
                </div>

                <h3 class="section-title">
                    <i class="fas fa-list"></i> Productos Registrados
                </h3>

                <div style="overflow-x: auto;">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Precio</th>
                                <th>Costo</th>
                                <th>Inventario</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Los productos se agregarán aquí dinámicamente -->
                        </tbody>
                    </table>
                </div>

                <div class="data-management">
                    <h3><i class="fas fa-database"></i> Gestión de Datos</h3>
                    <p>Los datos se guardan automáticamente en Firebase. También puedes:</p>
                    <div class="data-buttons">
                        <button class="btn btn-success" id="exportDataBtn">
                            <i class="fas fa-file-export"></i> Exportar Datos
                        </button>
                        <button class="btn btn-warning" id="importDataBtn">
                            <i class="fas fa-file-import"></i> Importar Datos
                        </button>
                        <button class="btn btn-danger" id="resetDataBtn">
                            <i class="fas fa-trash"></i> Restablecer Datos
                        </button>
                    </div>
                    <input type="file" id="importFile" style="display: none;" accept=".json">
                </div>
            </section>

            <!-- Point of Sale Section -->
            <section id="posSection" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-cash-register"></i> Punto de Venta
                </h2>

                <div class="alert alert-success">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Instrucciones:</strong> Haz clic en los productos para agregarlos a la venta.
                        Puedes ajustar las cantidades en el carrito de la derecha.
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <a href="vendedor.html" target="_blank" class="btn btn-primary" style="display: inline-flex;">
                        <i class="fas fa-mobile-alt"></i> Abrir Vista de Vendedor (Móvil)
                    </a>
                    <span style="margin-left: 10px; color: #666; font-size: 0.9rem;">
                        <i class="fas fa-external-link-alt"></i> Se abre en nueva pestaña - Ideal para teléfonos
                    </span>
                </div>

                <div class="pos-container">
                    <div class="products-grid" id="productsGrid">
                        <!-- Los productos para la venta se cargarán aquí -->
                    </div>

                    <div class="sale-sidebar">
                        <h3><i class="fas fa-shopping-cart"></i> Carrito de Venta</h3>

                        <div class="cart-items" id="cartItems">
                            <!-- Los productos del carrito aparecerán aquí -->
                            <p id="emptyCartMessage">El carrito está vacío. Selecciona productos para comenzar.</p>
                        </div>

                        <div class="cart-total">
                            Total: $<span id="cartTotal">0.00</span>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" id="completeSaleBtn" style="flex: 2;">
                                <i class="fas fa-check-circle"></i> Completar Venta
                            </button>
                            <button class="btn btn-warning" id="cancelSaleBtn" style="flex: 1;">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reportsSection" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-chart-bar"></i> Reportes y Estadísticas
                </h2>

                <div class="alert alert-warning">
                    <i class="fas fa-chart-line"></i>
                    <div>
                        <strong>Reportes:</strong> Visualiza el desempeño de tus ventas y el estado de tu inventario.
                    </div>
                </div>

                <!-- Filtros de Reportes -->
                <div class="report-filters">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="reportDate">Fecha del Reporte</label>
                            <input type="date" id="reportDate" class="form-control">
                        </div>
                        <div class="filter-group">
                            <label for="reportType">Tipo de Producto</label>
                            <select id="reportType" class="form-control">
                                <option value="todos">Todos los productos</option>
                                <option value="concentrado">Concentrados</option>
                                <option value="embolsado">Embolsados</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="reportRange">Rango de Fechas</label>
                            <select id="reportRange" class="form-control">
                                <option value="hoy">Hoy</option>
                                <option value="ayer">Ayer</option>
                                <option value="semana">Esta semana</option>
                                <option value="mes">Este mes</option>
                                <option value="personalizado">Personalizado</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <button class="btn btn-primary" id="generateReportBtn">
                                <i class="fas fa-filter"></i> Filtrar Reporte
                            </button>
                            <button class="btn btn-info" id="exportReportBtn" style="margin-top: 5px;">
                                <i class="fas fa-file-excel"></i> Exportar a Excel
                            </button>
                        </div>
                    </div>

                    <div class="filter-row" id="customRangeRow" style="display: none;">
                        <div class="filter-group">
                            <label for="startDate">Fecha Inicio</label>
                            <input type="date" id="startDate" class="form-control">
                        </div>
                        <div class="filter-group">
                            <label for="endDate">Fecha Fin</label>
                            <input type="date" id="endDate" class="form-control">
                        </div>
                    </div>
                </div>

                <!-- Pestañas de Reportes -->
                <div class="reports-tabs">
                    <button class="tab-btn active" data-tab="dailyReport">
                        <i class="fas fa-calendar-day"></i> Reporte Diario
                    </button>
                    <button class="tab-btn" data-tab="salesReport">
                        <i class="fas fa-shopping-cart"></i> Reporte de Ventas
                    </button>
                    <button class="tab-btn" data-tab="inventoryReport">
                        <i class="fas fa-boxes"></i> Reporte de Inventario
                    </button>
                    <button class="tab-btn" data-tab="productsReport">
                        <i class="fas fa-star"></i> Productos Más Vendidos
                    </button>
                </div>

                <!-- Tarjetas de Resumen -->
                <div class="report-summary-cards">
                    <div class="summary-card">
                        <h4>Ventas Hoy</h4>
                        <div class="value" id="salesTodayValue">$0.00</div>
                        <div class="subtext" id="salesTodayCount">0 ventas</div>
                    </div>
                    <div class="summary-card">
                        <h4>Productos Vendidos</h4>
                        <div class="value" id="productsSoldValue">0</div>
                        <div class="subtext" id="productsSoldType">0 concentrados, 0 embolsados</div>
                    </div>
                    <div class="summary-card">
                        <h4>Promedio por Venta</h4>
                        <div class="value" id="avgSaleValue">$0.00</div>
                        <div class="subtext">Por transacción</div>
                    </div>
                    <div class="summary-card">
                        <h4>Inventario Bajo</h4>
                        <div class="value" id="lowInventoryValue">0</div>
                        <div class="subtext">Productos por reabastecer</div>
                    </div>
                </div>

                <!-- Contenido de Reportes -->
                <div class="report-content active" id="dailyReport">
                    <h3 class="section-title">
                        <i class="fas fa-calendar-day"></i> Reporte Diario de Ventas
                    </h3>

                    <div style="overflow-x: auto;">
                        <table class="products-table">
                            <thead>
                                <tr>
                                    <th>Hora</th>
                                    <th>ID Venta</th>
                                    <th>Productos</th>
                                    <th>Cantidad Total</th>
                                    <th>Total Venta</th>
                                    <th>Detalles</th>
                                </tr>
                            </thead>
                            <tbody id="dailyReportBody">
                                <!-- Ventas del día se cargarán aquí -->
                            </tbody>
                        </table>
                    </div>

                    <div
                        style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: var(--border-radius);">
                        <h4><i class="fas fa-chart-pie"></i> Resumen del Día</h4>
                        <div id="dailySummaryDetails"></div>
                    </div>
                </div>

                <div class="report-content" id="salesReport">
                    <h3 class="section-title">
                        <i class="fas fa-shopping-cart"></i> Reporte Histórico de Ventas
                    </h3>

                    <div style="overflow-x: auto;">
                        <table class="products-table">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>ID Venta</th>
                                    <th>Concentrados</th>
                                    <th>Embolsados</th>
                                    <th>Total Productos</th>
                                    <th>Total Venta</th>
                                    <th>Ver Detalle</th>
                                </tr>
                            </thead>
                            <tbody id="salesReportBody">
                                <!-- Ventas históricas se cargarán aquí -->
                            </tbody>
                        </table>
                    </div>

                    <div style="margin-top: 20px; text-align: center;">
                        <button class="btn btn-primary" id="loadMoreSalesBtn">
                            <i class="fas fa-plus"></i> Cargar Más Ventas
                        </button>
                    </div>
                </div>

                <div class="report-content" id="inventoryReport">
                    <h3 class="section-title">
                        <i class="fas fa-boxes"></i> Reporte de Estado de Inventario
                    </h3>

                    <div style="overflow-x: auto;">
                        <table class="products-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Producto</th>
                                    <th>Tipo</th>
                                    <th>Stock Actual</th>
                                    <th>Stock Mínimo</th>
                                    <th>Estado</th>
                                    <th>Valor en Inventario</th>
                                    <th>Último Movimiento</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryReportBody">
                                <!-- Inventario se cargará aquí -->
                            </tbody>
                        </table>
                    </div>

                    <div
                        style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: var(--border-radius);">
                        <h4><i class="fas fa-calculator"></i> Resumen de Inventario</h4>
                        <div id="inventorySummaryDetails"></div>
                    </div>
                </div>

                <div class="report-content" id="productsReport">
                    <h3 class="section-title">
                        <i class="fas fa-star"></i> Productos Más Vendidos
                    </h3>

                    <div style="overflow-x: auto;">
                        <table class="products-table">
                            <thead>
                                <tr>
                                    <th>Posición</th>
                                    <th>Producto</th>
                                    <th>Tipo</th>
                                    <th>Unidades Vendidas</th>
                                    <th>Total en Ventas</th>
                                    <th>% del Total</th>
                                    <th>Stock Actual</th>
                                    <th>Rendimiento</th>
                                </tr>
                            </thead>
                            <tbody id="productsReportBody">
                                <!-- Productos más vendidos se cargarán aquí -->
                            </tbody>
                        </table>
                    </div>

                    <div
                        style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: var(--border-radius);">
                        <h4><i class="fas fa-trophy"></i> Top 5 Productos</h4>
                        <div id="topProductsChart"></div>
                    </div>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section id="dashboardSection" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </h2>

                <div class="alert alert-success">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Bienvenido al Dashboard:</strong> Visualiza el resumen general de tu negocio.
                    </div>
                </div>

                <div class="report-summary-cards">
                    <div class="summary-card" style="border-top-color: var(--primary-color);">
                        <h4>Ventas Totales</h4>
                        <div class="value" id="dashboardTotalSales">$0.00</div>
                        <div class="subtext">Histórico completo</div>
                    </div>
                    <div class="summary-card" style="border-top-color: var(--success-color);">
                        <h4>Productos en Stock</h4>
                        <div class="value" id="dashboardTotalProducts">0</div>
                        <div class="subtext" id="dashboardProductTypes">0 concentrados, 0 embolsados</div>
                    </div>
                    <div class="summary-card" style="border-top-color: var(--info-color);">
                        <h4>Ventas del Mes</h4>
                        <div class="value" id="dashboardMonthlySales">$0.00</div>
                        <div class="subtext">Este mes</div>
                    </div>
                    <div class="summary-card" style="border-top-color: var(--warning-color);">
                        <h4>Productos Bajo Stock</h4>
                        <div class="value" id="dashboardLowStock">0</div>
                        <div class="subtext">Necesitan reabastecimiento</div>
                    </div>
                </div>

                <div
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px; margin-top: 30px;">
                    <div
                        style="background-color: white; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                        <h3><i class="fas fa-chart-line"></i> Ventas Recientes</h3>
                        <div id="recentSalesList" style="margin-top: 15px; max-height: 300px; overflow-y: auto;">
                            <!-- Ventas recientes se cargarán aquí -->
                        </div>
                    </div>

                    <div
                        style="background-color: white; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                        <h3><i class="fas fa-exclamation-triangle"></i> Productos por Agotarse</h3>
                        <div id="lowStockProducts" style="margin-top: 15px; max-height: 300px; overflow-y: auto;">
                            <!-- Productos bajos en stock se cargarán aquí -->
                        </div>
                    </div>
                </div>

                <div
                    style="margin-top: 30px; background-color: white; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                    <h3><i class="fas fa-trophy"></i> Top Productos del Mes</h3>
                    <div id="monthlyTopProducts" style="margin-top: 15px;">
                        <!-- Top productos del mes se cargarán aquí -->
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settingsSection" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-cog"></i> Configuración
                </h2>

                <div class="alert alert-warning">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Configuración del Sistema:</strong> Personaliza la aplicación según tus necesidades.
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                    <div
                        style="background-color: white; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                        <h3><i class="fas fa-store"></i> Información del Negocio</h3>
                        <div class="form-group" style="margin-top: 15px;">
                            <label for="businessName">Nombre del Negocio</label>
                            <input type="text" id="businessName" class="form-control" placeholder="Cami Candy">
                        </div>
                        <div class="form-group">
                            <label for="businessAddress">Dirección</label>
                            <input type="text" id="businessAddress" class="form-control"
                                placeholder="Dirección del negocio">
                        </div>
                        <div class="form-group">
                            <label for="businessPhone">Teléfono</label>
                            <input type="text" id="businessPhone" class="form-control"
                                placeholder="Teléfono de contacto">
                        </div>
                        <button class="btn btn-primary" id="saveBusinessInfoBtn" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-save"></i> Guardar Información
                        </button>
                    </div>

                    <div
                        style="background-color: white; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                        <h3><i class="fas fa-receipt"></i> Configuración de Ventas</h3>
                        <div class="form-group" style="margin-top: 15px;">
                            <label for="taxRate">Tasa de Impuesto (%)</label>
                            <input type="number" id="taxRate" class="form-control" min="0" max="100" step="0.1"
                                value="16">
                        </div>
                        <div class="form-group">
                            <label for="currencySymbol">Símbolo de Moneda</label>
                            <input type="text" id="currencySymbol" class="form-control" value="$" maxlength="3">
                        </div>
                        <div class="form-group">
                            <label for="receiptFooter">Pie de Página en Tickets</label>
                            <textarea id="receiptFooter" class="form-control" rows="3"
                                placeholder="Gracias por su compra..."></textarea>
                        </div>
                        <button class="btn btn-primary" id="saveSalesSettingsBtn"
                            style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-save"></i> Guardar Configuración
                        </button>
                    </div>

                    <div
                        style="background-color: white; padding: 20px; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                        <h3><i class="fas fa-palette"></i> Apariencia</h3>
                        <div class="form-group" style="margin-top: 15px;">
                            <label for="themeColor">Color del Tema</label>
                            <select id="themeColor" class="form-control">
                                <option value="default">Default (Rosa/Morado)</option>
                                <option value="blue">Azul</option>
                                <option value="green">Verde</option>
                                <option value="red">Rojo</option>
                                <option value="orange">Naranja</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="language">Idioma</label>
                            <select id="language" class="form-control">
                                <option value="es">Español</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="darkMode"> Modo Oscuro
                            </label>
                        </div>
                        <button class="btn btn-primary" id="saveAppearanceBtn" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-save"></i> Guardar Apariencia
                        </button>
                    </div>
                </div>

                <div class="data-management" style="margin-top: 30px;">
                    <h3><i class="fas fa-database"></i> Gestión de Datos</h3>
                    <p>Administra los datos de la aplicación:</p>
                    <div class="data-buttons">
                        <button class="btn btn-success" id="exportAllDataBtn">
                            <i class="fas fa-file-export"></i> Exportar Todos los Datos
                        </button>
                        <button class="btn btn-danger" id="clearAllDataBtn">
                            <i class="fas fa-trash"></i> Limpiar Todos los Datos
                        </button>
                    </div>
                </div>

                <!-- Sección de Almacenamiento Firebase -->
                <div
                    style="margin-top: 30px; background: linear-gradient(135deg, #f8f9fa, #e9ecef); padding: 25px; border-radius: var(--border-radius); border: 1px solid #dee2e6;">
                    <h3 style="margin-bottom: 20px;"><i class="fas fa-cloud" style="color: var(--info-color);"></i>
                        Almacenamiento en Firebase</h3>

                    <!-- Barra de uso principal -->
                    <div
                        style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-weight: 600; color: var(--secondary-color);">
                                <i class="fas fa-hdd"></i> Uso Estimado
                            </span>
                            <span id="storagePercentText"
                                style="font-weight: bold; color: var(--success-color);">0.1%</span>
                        </div>
                        <div
                            style="height: 20px; background-color: #e9ecef; border-radius: 10px; overflow: hidden; position: relative;">
                            <div id="storageBar"
                                style="height: 100%; width: 1%; background: linear-gradient(90deg, var(--success-color), #5cb85c); border-radius: 10px; transition: width 0.5s ease;">
                            </div>
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.85rem; color: #666;">
                            <span id="storageUsedText">Calculando...</span>
                            <span>Límite: 1 GB (Plan Gratuito)</span>
                        </div>
                    </div>

                    <!-- Detalles de uso -->
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <i class="fas fa-box" style="font-size: 1.5rem; color: var(--primary-color);"></i>
                            <div style="margin-top: 8px; font-size: 1.3rem; font-weight: bold; color: var(--secondary-color);"
                                id="storageProductsCount">0</div>
                            <div style="font-size: 0.85rem; color: #666;">Productos</div>
                            <div style="font-size: 0.75rem; color: #999;" id="storageProductsSize">~0 KB</div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <i class="fas fa-receipt" style="font-size: 1.5rem; color: var(--success-color);"></i>
                            <div style="margin-top: 8px; font-size: 1.3rem; font-weight: bold; color: var(--secondary-color);"
                                id="storageSalesCount">0</div>
                            <div style="font-size: 0.85rem; color: #666;">Ventas</div>
                            <div style="font-size: 0.75rem; color: #999;" id="storageSalesSize">~0 KB</div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <i class="fas fa-exchange-alt" style="font-size: 1.5rem; color: var(--info-color);"></i>
                            <div style="margin-top: 8px; font-size: 1.3rem; font-weight: bold; color: var(--secondary-color);"
                                id="storageMovementsCount">0</div>
                            <div style="font-size: 0.85rem; color: #666;">Movimientos</div>
                            <div style="font-size: 0.75rem; color: #999;" id="storageMovementsSize">~0 KB</div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <i class="fas fa-database" style="font-size: 1.5rem; color: var(--warning-color);"></i>
                            <div style="margin-top: 8px; font-size: 1.3rem; font-weight: bold; color: var(--secondary-color);"
                                id="storageTotalSize">0 KB</div>
                            <div style="font-size: 0.85rem; color: #666;">Total Usado</div>
                            <div style="font-size: 0.75rem; color: #999;">de 1 GB disponible</div>
                        </div>
                    </div>

                    <!-- Información adicional -->
                    <div
                        style="margin-top: 20px; padding: 15px; background: #cce5ff; border-radius: 8px; border-left: 4px solid var(--info-color);">
                        <p style="margin: 0; font-size: 0.9rem;">
                            <i class="fas fa-info-circle" style="color: var(--info-color);"></i>
                            <strong>Plan Gratuito Firebase:</strong> 1 GB de almacenamiento, 50,000 lecturas/día, 20,000
                            escrituras/día.
                            <br><small style="color: #666;">Esta es una estimación basada en el número de documentos.
                                Los valores reales pueden variar ligeramente.</small>
                        </p>
                    </div>

                    <button class="btn btn-info" id="refreshStorageBtn" style="margin-top: 15px;">
                        <i class="fas fa-sync-alt"></i> Actualizar Estadísticas
                    </button>
                </div>
            </section>

            <!-- Help Section -->
            <section id="helpSection" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-question-circle"></i> ¿Cómo utilizar la aplicación?
                </h2>

                <div class="alert alert-success">
                    <i class="fas fa-book"></i>
                    <div>
                        <strong>Manual de Usuario:</strong> Guía rápida para usar todas las funciones de Cami Candy POS.
                    </div>
                </div>

                <!-- Índice -->
                <div
                    style="background: white; padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; box-shadow: var(--shadow);">
                    <h3><i class="fas fa-list-ol"></i> Índice de Contenidos</h3>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 10px; margin-top: 15px;">
                        <a href="#help-inventory" style="color: var(--primary-color); text-decoration: none;">
                            <i class="fas fa-boxes"></i> 1. Gestión de Inventario
                        </a>
                        <a href="#help-pos" style="color: var(--primary-color); text-decoration: none;">
                            <i class="fas fa-cash-register"></i> 2. Realizar una Venta
                        </a>
                        <a href="#help-vendedor" style="color: var(--primary-color); text-decoration: none;">
                            <i class="fas fa-mobile-alt"></i> 3. Vista de Vendedor (Móvil)
                        </a>
                        <a href="#help-reports" style="color: var(--primary-color); text-decoration: none;">
                            <i class="fas fa-chart-bar"></i> 4. Ver Reportes
                        </a>
                        <a href="#help-dashboard" style="color: var(--primary-color); text-decoration: none;">
                            <i class="fas fa-tachometer-alt"></i> 5. Dashboard
                        </a>
                    </div>
                </div>

                <!-- 1. Gestión de Inventario -->
                <div id="help-inventory"
                    style="background: white; padding: 25px; border-radius: var(--border-radius); margin-bottom: 20px; box-shadow: var(--shadow);">
                    <h3
                        style="color: var(--secondary-color); border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;">
                        <i class="fas fa-boxes"></i> 1. Gestión de Inventario
                    </h3>

                    <div style="margin-top: 20px;">
                        <h4><i class="fas fa-plus-circle" style="color: var(--success-color);"></i> Agregar un Producto
                        </h4>
                        <ol style="line-height: 2; margin-top: 10px;">
                            <li>Ve a la sección <strong>"Gestión de Inventario"</strong> en el menú lateral.</li>
                            <li>Llena el formulario <strong>"Agregar Nuevo Producto"</strong>:
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li><strong>Nombre:</strong> Ej: "Concentrado Tamarindo"</li>
                                    <li><strong>Tipo:</strong> Concentrado o Embolsado</li>
                                    <li><strong>Precio de Venta:</strong> El precio al público</li>
                                    <li><strong>Costo:</strong> Lo que te cuesta el producto</li>
                                    <li><strong>Inventario Inicial:</strong> Cuántas unidades tienes</li>
                                    <li><strong>Inventario Mínimo:</strong> Cuándo te avisa que está bajo</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Guardar Producto"</strong>.</li>
                        </ol>

                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                            <strong><i class="fas fa-lightbulb" style="color: var(--warning-color);"></i> Tip:</strong>
                            Los productos con inventario bajo aparecerán marcados en <span
                                style="color: var(--danger-color); font-weight: bold;">ROJO</span>.
                        </div>
                    </div>

                    <div style="margin-top: 25px;">
                        <h4><i class="fas fa-edit" style="color: var(--info-color);"></i> Editar o Ajustar Stock</h4>
                        <ol style="line-height: 2; margin-top: 10px;">
                            <li>Busca el producto en la tabla de <strong>"Productos Registrados"</strong>.</li>
                            <li>Usa los botones de la columna <strong>"Acciones"</strong>:
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li><span
                                            style="background: var(--info-color); color: white; padding: 2px 8px; border-radius: 4px;"><i
                                                class="fas fa-sync-alt"></i></span> Ajustar inventario</li>
                                    <li><span
                                            style="background: var(--warning-color); color: white; padding: 2px 8px; border-radius: 4px;"><i
                                                class="fas fa-edit"></i></span> Editar producto</li>
                                    <li><span
                                            style="background: var(--danger-color); color: white; padding: 2px 8px; border-radius: 4px;"><i
                                                class="fas fa-trash"></i></span> Eliminar producto</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>

                <!-- 2. Realizar una Venta -->
                <div id="help-pos"
                    style="background: white; padding: 25px; border-radius: var(--border-radius); margin-bottom: 20px; box-shadow: var(--shadow);">
                    <h3
                        style="color: var(--secondary-color); border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;">
                        <i class="fas fa-cash-register"></i> 2. Realizar una Venta (Punto de Venta)
                    </h3>

                    <div style="margin-top: 20px;">
                        <h4><i class="fas fa-shopping-cart" style="color: var(--success-color);"></i> Pasos para vender:
                        </h4>
                        <ol style="line-height: 2.2; margin-top: 10px;">
                            <li>Ve a <strong>"Punto de Venta"</strong> en el menú lateral.</li>
                            <li><strong>Haz clic en los productos</strong> que el cliente quiere comprar.
                                <br><small style="color: #888;">Cada clic agrega 1 unidad al carrito.</small>
                            </li>
                            <li>En el <strong>carrito de la derecha</strong> puedes:
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li>Aumentar cantidad con <span
                                            style="background: var(--primary-color); color: white; padding: 2px 8px; border-radius: 50%;">+</span>
                                    </li>
                                    <li>Disminuir cantidad con <span
                                            style="background: var(--danger-color); color: white; padding: 2px 8px; border-radius: 50%;">-</span>
                                    </li>
                                </ul>
                            </li>
                            <li>Verifica el <strong>TOTAL</strong> en la parte inferior.</li>
                            <li>Haz clic en <strong>"Completar Venta"</strong> (botón verde).</li>
                            <li>¡Listo! El inventario se descuenta automáticamente.</li>
                        </ol>

                        <div
                            style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid var(--warning-color);">
                            <strong><i class="fas fa-exclamation-triangle" style="color: var(--warning-color);"></i>
                                Importante:</strong>
                            Si te equivocas, usa el botón <strong>"Cancelar"</strong> antes de completar la venta.
                        </div>
                    </div>
                </div>

                <!-- 3. Vista de Vendedor -->
                <div id="help-vendedor"
                    style="background: white; padding: 25px; border-radius: var(--border-radius); margin-bottom: 20px; box-shadow: var(--shadow);">
                    <h3
                        style="color: var(--secondary-color); border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;">
                        <i class="fas fa-mobile-alt"></i> 3. Vista de Vendedor (Para Celulares)
                    </h3>

                    <div style="margin-top: 20px;">
                        <h4><i class="fas fa-link" style="color: var(--info-color);"></i> Cómo acceder:</h4>
                        <ol style="line-height: 2.2; margin-top: 10px;">
                            <li>En el <strong>Punto de Venta</strong>, haz clic en <strong>"Abrir Vista de Vendedor
                                    (Móvil)"</strong>.</li>
                            <li>O abre directamente: <code
                                    style="background: #f0f0f0; padding: 3px 8px; border-radius: 4px;">vendedor.html</code>
                            </li>
                            <li>Comparte el enlace con tus vendedores para usar en sus celulares.</li>
                        </ol>

                        <h4 style="margin-top: 20px;"><i class="fas fa-receipt"
                                style="color: var(--success-color);"></i> Proceso de venta en celular:</h4>
                        <ol style="line-height: 2.2; margin-top: 10px;">
                            <li><strong>Toca los productos</strong> para agregarlos al carrito.</li>
                            <li>Ajusta cantidades con los botones <strong>+ / -</strong>.</li>
                            <li>Toca <strong>"Cobrar"</strong> cuando esté listo.</li>
                            <li>En el modal que aparece:
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li>Escribe el <strong>nombre del cliente</strong>.</li>
                                    <li>Selecciona el <strong>tipo de pago</strong>: Efectivo, Transferencia, Depósito o
                                        A Crédito.</li>
                                </ul>
                            </li>
                            <li>Toca <strong>"Confirmar Venta"</strong>.</li>
                            <li>¡Se genera un recibo! Puedes:
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li><i class="fas fa-download"></i> <strong>Descargar</strong> el recibo.</li>
                                    <li><i class="fab fa-whatsapp" style="color: #25d366;"></i> <strong>Enviar por
                                            WhatsApp</strong> al cliente.</li>
                                </ul>
                            </li>
                        </ol>

                        <div
                            style="background: #d4edda; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid var(--success-color);">
                            <strong><i class="fas fa-check-circle" style="color: var(--success-color);"></i>
                                ¡Importante!</strong>
                            Todas las ventas de los vendedores se registran automáticamente y aparecen en tus reportes.
                            El inventario se descuenta en tiempo real.
                        </div>
                    </div>
                </div>

                <!-- 4. Ver Reportes -->
                <div id="help-reports"
                    style="background: white; padding: 25px; border-radius: var(--border-radius); margin-bottom: 20px; box-shadow: var(--shadow);">
                    <h3
                        style="color: var(--secondary-color); border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;">
                        <i class="fas fa-chart-bar"></i> 4. Ver Reportes y Estadísticas
                    </h3>

                    <div style="margin-top: 20px;">
                        <h4><i class="fas fa-filter" style="color: var(--info-color);"></i> Cómo ver reportes:</h4>
                        <ol style="line-height: 2.2; margin-top: 10px;">
                            <li>Ve a <strong>"Reportes"</strong> en el menú lateral.</li>
                            <li>Usa los <strong>filtros</strong> en la parte superior:
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li><strong>Fecha:</strong> Selecciona el día que quieres ver.</li>
                                    <li><strong>Tipo de Producto:</strong> Todos, Concentrados o Embolsados.</li>
                                    <li><strong>Rango:</strong> Hoy, Ayer, Esta Semana, Este Mes o Personalizado.</li>
                                </ul>
                            </li>
                            <li>Haz clic en <strong>"Filtrar Reporte"</strong>.</li>
                        </ol>

                        <h4 style="margin-top: 20px;"><i class="fas fa-list" style="color: var(--primary-color);"></i>
                            Tipos de reportes disponibles:</h4>
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                <strong><i class="fas fa-calendar-day"></i> Reporte Diario</strong>
                                <p style="font-size: 0.9rem; margin-top: 5px;">Ventas del día con detalle de productos y
                                    clientes.</p>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                <strong><i class="fas fa-shopping-cart"></i> Reporte de Ventas</strong>
                                <p style="font-size: 0.9rem; margin-top: 5px;">Historial completo de todas las ventas.
                                </p>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                <strong><i class="fas fa-boxes"></i> Reporte de Inventario</strong>
                                <p style="font-size: 0.9rem; margin-top: 5px;">Estado actual de todos los productos.</p>
                            </div>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                                <strong><i class="fas fa-star"></i> Productos Más Vendidos</strong>
                                <p style="font-size: 0.9rem; margin-top: 5px;">Ranking de tus productos estrella.</p>
                            </div>
                        </div>

                        <div
                            style="background: #cce5ff; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid var(--info-color);">
                            <strong><i class="fas fa-file-excel" style="color: var(--info-color);"></i>
                                Exportar:</strong>
                            Usa el botón <strong>"Exportar a Excel"</strong> para descargar los datos en formato CSV.
                        </div>
                    </div>
                </div>

                <!-- 5. Dashboard -->
                <div id="help-dashboard"
                    style="background: white; padding: 25px; border-radius: var(--border-radius); margin-bottom: 20px; box-shadow: var(--shadow);">
                    <h3
                        style="color: var(--secondary-color); border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;">
                        <i class="fas fa-tachometer-alt"></i> 5. Dashboard (Resumen General)
                    </h3>

                    <div style="margin-top: 20px;">
                        <p>El Dashboard te muestra un <strong>resumen rápido</strong> de tu negocio:</p>

                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div
                                style="background: linear-gradient(135deg, #ff6b8b, #ff8e9e); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                                <i class="fas fa-dollar-sign" style="font-size: 1.5rem;"></i>
                                <p style="margin-top: 5px; font-weight: bold;">Ventas Totales</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #28a745, #5cb85c); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                                <i class="fas fa-box" style="font-size: 1.5rem;"></i>
                                <p style="margin-top: 5px; font-weight: bold;">Productos en Stock</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #17a2b8, #5bc0de); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                                <i class="fas fa-calendar" style="font-size: 1.5rem;"></i>
                                <p style="margin-top: 5px; font-weight: bold;">Ventas del Mes</p>
                            </div>
                            <div
                                style="background: linear-gradient(135deg, #ffc107, #ffda44); color: #333; padding: 15px; border-radius: 8px; text-align: center;">
                                <i class="fas fa-exclamation" style="font-size: 1.5rem;"></i>
                                <p style="margin-top: 5px; font-weight: bold;">Stock Bajo</p>
                            </div>
                        </div>

                        <p style="margin-top: 20px;">Además incluye:</p>
                        <ul style="line-height: 2; margin-left: 20px;">
                            <li><strong>Ventas Recientes:</strong> Las últimas transacciones realizadas.</li>
                            <li><strong>Productos por Agotarse:</strong> Alerta de productos con bajo inventario.</li>
                            <li><strong>Top Productos del Mes:</strong> Los más vendidos del mes actual.</li>
                        </ul>
                    </div>
                </div>

                <!-- Contacto/Soporte -->
                <div
                    style="background: linear-gradient(135deg, var(--secondary-color), var(--primary-color)); color: white; padding: 25px; border-radius: var(--border-radius); text-align: center;">
                    <h3><i class="fas fa-heart"></i> ¡Gracias por usar Cami Candy POS!</h3>
                    <p style="margin-top: 10px;">Si tienes dudas, revisa este manual o contacta al administrador.</p>
                    <p style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;">Versión 1.0 - 2024</p>
                </div>
            </section>
        </div>
    </div>

    <!-- Modal para ajustar inventario -->
    <div id="adjustStockModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Ajustar Inventario</h3>
                <button class="close-modal" id="closeStockModal">&times;</button>
            </div>
            <div id="modalBody">
                <!-- Contenido dinámico -->
            </div>
        </div>
    </div>

    <!-- Modal para detalles de venta -->
    <div id="saleDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Detalles de Venta #<span id="saleDetailId"></span></h3>
                <button class="close-modal" id="closeSaleDetailModal">&times;</button>
            </div>
            <div id="saleDetailBody">
                <!-- Contenido dinámico -->
            </div>
        </div>
    </div>

    <!-- Scripts JavaScript -->
    <script src="js/config.js"></script>
    <script src="js/firebase-service.js"></script>
    <script src="js/ui-sidebar.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/pos.js"></script>
    <script src="js/reports.js"></script>
    <script src="js/reports-part2.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/main.js"></script>
</body>

</html>